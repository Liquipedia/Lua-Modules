$table2-radius: 0.5rem;
$table2-cell-padding-y: 0.5rem;
$table2-cell-padding-x: 0.75rem;

@mixin table2-surface-colors() {
	.theme--light & {
		background-color: var( --clr-background, #ffffff );
		border-color: var( --clr-on-surface-light-primary-12 );
		color: var( --clr-secondary-16 );
	}

	.theme--dark & {
		background-color: var( --clr-background, #121212 );
		border-color: var( --clr-on-surface-dark-primary-12 );
		color: var( --clr-secondary-100 );
	}
}

.table2 {
	display: block;
	width: fit-content;
	max-width: 100%;
	border: 1px solid;
	border-radius: $table2-radius;
	overflow: hidden;

	@include table2-surface-colors();

	&__container {
		overflow: auto hidden;
		max-width: 100%;
		-webkit-overflow-scrolling: touch;
		touch-action: pan-x pan-y;
		overscroll-behavior-x: contain;
	}

	&__footer {
		font-weight: bold;
		padding: 0.5rem 0.75rem;
		text-align: center;
		border-top: 1px solid;

		.theme--light & {
			border-top-color: var( --clr-on-surface-light-primary-12 );
		}

		.theme--dark & {
			border-top-color: var( --clr-on-surface-dark-primary-12 );
		}
	}

	&__table {
		width: 100%;
		border-spacing: 0;
		border-collapse: separate;
		border: 0;

		td,
		th {
			padding: $table2-cell-padding-y $table2-cell-padding-x;
			vertical-align: middle;
			text-align: left;

			&[ data-align="right" ] {
				text-align: right;
			}

			&[ data-align="center" ] {
				text-align: center;
			}

			&[ data-nowrap ] {
				white-space: nowrap;
			}

			&[ data-shrink ] {
				width: fit-content;
				white-space: nowrap;
			}
		}

		thead tr,
		tr:has( th ):not( :has( td ) ) {
			outline: 1px solid;
			white-space: nowrap;

			.theme--light & {
				background-color: var( --clr-on-surface-light-primary-4 );
				outline-color: var( --clr-on-surface-light-primary-12 );
				color: var( --clr-secondary-25 );
			}

			.theme--dark & {
				background-color: var( --clr-on-surface-dark-primary-4 );
				outline-color: var( --clr-on-surface-dark-primary-12 );
				color: var( --clr-secondary-80 );
			}

			th {
				font-weight: bold;
			}
		}
	}

	tr.table2__row--body {
		&.table2__row--even {
			.theme--light & {
				background-color: var( --clr-on-surface-light-primary-4 );
			}

			.theme--dark & {
				background-color: var( --clr-on-surface-dark-primary-4 );
			}
		}

		&.table2__row--highlighted {
			background-color: var( --publisher-premier-highlight-background-color ) !important;

			&:hover {
				background-color: var( --publisher-premier-highlight-background-color ) !important;
			}
		}

		&:hover {
			.theme--light & {
				background-color: var( --clr-on-surface-light-primary-8 );
			}

			.theme--dark & {
				background-color: var( --clr-on-surface-dark-primary-8 );
			}
		}
	}

	&__title {
		padding: $table2-cell-padding-y $table2-cell-padding-x;
		font-weight: bold;
		border-bottom: 1px solid;

		.theme--light & {
			background-color: var( --clr-on-surface-light-primary-4 );
			color: var( --clr-secondary-16 );
			border-color: var( --clr-on-surface-light-primary-12 );
		}

		.theme--dark & {
			background-color: var( --clr-on-surface-dark-primary-4 );
			color: var( --clr-secondary-100 );
			border-color: var( --clr-on-surface-dark-primary-12 );
		}
	}

	&__caption {
		margin-bottom: 0.75rem;
		font-weight: bold;

		.theme--light & {
			color: var( --clr-secondary-39 );
		}

		.theme--dark & {
			color: var( --clr-secondary-80 );
		}
	}

	tr.table2__row--head {
		outline: 1px solid;
		white-space: nowrap;

		.theme--light & {
			background-color: var( --clr-on-surface-light-primary-4 );
			outline-color: var( --clr-on-surface-light-primary-12 );
			color: var( --clr-secondary-25 );
		}

		.theme--dark & {
			background-color: var( --clr-on-surface-dark-primary-4 );
			outline-color: var( --clr-on-surface-dark-primary-12 );
			color: var( --clr-secondary-80 );
		}

		th {
			font-weight: bold;
		}
	}

	&--themed {
		.table2__title {
			.theme--light & {
				background-color: var( --clr-wiki-theme-40, var( --clr-wiki-theme-primary, #1f3d7a ) );
			}

			.theme--dark & {
				background-color: var( --clr-wiki-theme-20, var( --clr-wiki-theme-primary, #1f3d7a ) );
			}
			color: #ffffff;
		}
	}
}

// Standalone table2__table for MediaWiki usage (without .table2 wrapper)
.table2__table:not( .table2 .table2__table ) {
	width: auto;
	border: 1px solid;
	border-radius: $table2-radius;
	overflow: hidden;

	@include table2-surface-colors();

	tbody tr:not( :has( th ):not( :has( td ) ) ):nth-child( odd ) {
		.theme--light & {
			background-color: var( --clr-on-surface-light-primary-4 );
		}

		.theme--dark & {
			background-color: var( --clr-on-surface-dark-primary-4 );
		}
	}

	tbody tr:not( :has( th ):not( :has( td ) ) ):hover {
		.theme--light & {
			background-color: var( --clr-on-surface-light-primary-8 );
		}

		.theme--dark & {
			background-color: var( --clr-on-surface-dark-primary-8 );
		}
	}
}
